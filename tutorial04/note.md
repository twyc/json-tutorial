ASCII是只能用0~127表示128个字符的简单字符编码，太多字符不能支持。

Unicode是一个字符编码标准，为所有的字符分配唯一标识符。收录为统一字符集（Universal Coded Character Set, UCS），每个字符映射至一个整数码点（code point）。

码点的范围是 0 至 0x10FFFF。明显，UCS 中的字符无法像 ASCII 般以一个字节存储。

因此，Unicode 还制定了各种储存码点的方式，即 Unicode 转换格式（Uniform Transformation Format, UTF）。现时流行的 UTF 为 UTF-8、UTF-16 和 UTF-32。每种 UTF 会把一个码点储存为一至多个编码单元（code unit）。例如 UTF-8 的编码单元是 8 位的字节、UTF-16 为 16 位、UTF-32 为 32 位。除 UTF-32 外，UTF-8 和 UTF-16 都是可变长度编码。

为什么需要Uniform Transformation Format 而不是直接展现Unicode？ // answered by ChatGPT
```
Unicode是一个字符集标准，目的是为世界上所有的字符提供一个唯一的标识符。它定义了每个字符的代码点，并不涉及字符在计算机中的存储和传输方式。

UTF（Uniform Transformation Format）是一组编码方案，用于将Unicode字符编码为字节序列，以便在计算机系统中存储、传输和处理。UTF编码方案的设计考虑了以下几个方面的需求：

兼容性：UTF编码方案的目标之一是兼容ASCII字符集。ASCII字符是许多计算机系统和传输协议的基础，并且在大多数情况下，ASCII字符可以使用单个字节来表示。UTF编码方案确保ASCII字符与标准ASCII编码一致，使得现有的ASCII系统可以无缝地处理UTF编码的数据。这种兼容性使得从现有ASCII系统过渡到Unicode更加平滑。

节省空间：Unicode字符集非常庞大，包含大量的字符。直接使用Unicode的每个字符所需的存储空间是固定的，无论字符是否需要这么多空间。而UTF编码方案采用了一种变长编码方式，根据Unicode字符的范围，使用1到4个字节来表示字符，使得存储空间更加高效利用。

互操作性：在不同的计算机系统和网络中传输和处理数据时，需要确保字符的编码和解码是一致的。使用统一的UTF编码方案，可以在不同的平台和系统之间共享和交换Unicode字符，而无需担心字符集转换的问题。这种互操作性使得数据的交换和共享更加方便和可靠。

因此，UTF编码方案的设计和使用是为了满足兼容性、空间节省和互操作性的需求，使Unicode字符能够在计算机系统中高效地存储、传输和处理。通过使用UTF编码方案，可以实现Unicode字符在各种计算机和通信系统中的广泛应用和无缝交互。
```


UTF-8 成为现时互联网上最流行的格式，有几个原因：
- 它采用字节为编码单元，不会有字节序（endianness）的问题。 // 大端/小端
- 每个 ASCII 字符只需一个字节去储存。
- 如果程序原来是以字节方式储存字符，理论上不需要特别改动就能处理 UTF-8 的数据。


对JSON字符串中的 \uXXXX 是以 16 进制表示码点 U+0000 至 U+FFFF，我们需要：
- 解析 4 位十六进制整数为码点；
- 把这个码点编码成 UTF-8。

4 位的 16 进制数字只能表示 0 至 0xFFFF，但UCS 的码点是从 0 至 0x10FFFF，那怎么能表示多出来的码点？
其实，U+0000 至 U+FFFF 这组 Unicode 字符称为基本多文种平面（basic multilingual plane, BMP），还有另外 16 个平面。那么 BMP 以外的字符，JSON 会使用代理对（surrogate pair）表示 \uXXXX\uYYYY。

在 BMP 中，保留了 2048 个代理码点。如果第一个码点是 U+D800 至 U+DBFF，我们便知道它的代码对的高代理项（high surrogate），之后应该伴随一个 U+DC00 至 U+DFFF 的低代理项（low surrogate）。然后，我们用下列公式把代理对 (H, L) 变换成真实的码点： // 即4 位十六进制整数一共32个比特，其中21个标识平面内的字符位置，剩余11个标识平面
codepoint = 0x10000 + (H − 0xD800) × 0x400 + (L − 0xDC00)

UTF-8的编码规则：根据码点范围，把码点的二进位分拆成 1 至最多 4 个字节。
